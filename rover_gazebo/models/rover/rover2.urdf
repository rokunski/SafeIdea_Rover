<?xml version="1.0"?>

<robot name="rover">
  <link name="chassis">
    <inertial>
      <origin xyz="0 0 0" />
      <mass value="1.0" />
      <inertia  ixx="0.1" ixy="0.0"  ixz="0.0"  iyy="0.1"  iyz="0.0"  izz="0.1" />
    </inertial>
    <visual>
      <origin xyz="0 0 0.59"/>
      <geometry>
        <box size="0.7 0.56 0.02"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0.59"/>
      <geometry>
        <box size="0.7 0.56 0.02"/>
      </geometry>
    </collision>

    <visual>
      <origin rpy= "0 0.7854 0" xyz="-0.25 0.284 0.4"/>
      <geometry>
        <box size="0.04 0.04 0.5"/>
      </geometry>
    </visual>

    <collision>
      <origin rpy= "0 0.7854 0" xyz="-0.25 0.284 0.4"/>
      <geometry>
        <box size="0.04 0.04 0.5"/>
      </geometry>
    </collision>

    <visual>
      <origin rpy= "0 0.7854 0" xyz="-0.25 -0.284 0.4"/>
      <geometry>
        <box size="0.04 0.04 0.5"/>
      </geometry>
    </visual>

    <collision>
      <origin rpy= "0 0.7854 0" xyz="-0.25 -0.284 0.4"/>
      <geometry>
        <box size="0.04 0.04 0.5"/>
      </geometry>
    </collision>


    <visual>
      <origin rpy= "0 -0.7854 0" xyz="0.2 0.284 0.475"/>
      <geometry>
        <box size="0.04 0.04 0.3"/>
      </geometry>
    </visual>

    <collision>
      <origin rpy= "0 -0.7854 0" xyz="0.2 0.284 0.475"/>
      <geometry>
        <box size="0.04 0.04 0.3"/>
      </geometry>
    </collision>

    <visual>
      <origin rpy= "0 -0.7854 0" xyz="0.2 -0.284 0.475"/>
      <geometry>
        <box size="0.04 0.04 0.3"/>
      </geometry>
    </visual>

    <collision>
      <origin rpy= "0 -0.7854 0" xyz="0.2 -0.284 0.475"/>
      <geometry>
        <box size="0.04 0.04 0.3"/>
      </geometry>
    </collision>
  </link>


    <link name="left_steer">
      <inertial>
        <origin xyz="0 0 -0.05" />
        <mass value="1" />
        <inertia  ixx="0.005" ixy="0.0"  ixz="0.0"  iyy="0.005"  iyz="0.0"  izz=".005" />
      </inertial>
      <visual>
        <origin xyz="0 0 0"/>
        <geometry>
          <box size="0.5 0.04 0.04"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0"/>
        <geometry>
          <box size="0.5 0.04 0.04"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="-0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="-0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </collision>

    </link>

    <link name="right_steer">
      <inertial>
        <origin xyz="0 0 -0.05" />
        <mass value="1" />
        <inertia  ixx="0.005" ixy="0.0"  ixz="0.0"  iyy="0.005"  iyz="0.0"  izz=".005" />
      </inertial>
      <visual>
        <origin xyz="0 0 0"/>
        <geometry>
          <box size="0.5 0.04 0.04"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0"/>
        <geometry>
          <box size="0.5 0.04 0.04"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="-0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="-0.23 0 -0.07285553390"/>
        <geometry>
          <box size="0.04 0.04 0.1057106781"/>
        </geometry>
      </collision>

    </link>


    <link name="left_wheel_1">
      <inertial>
        <origin xyz="0 0.15 0" />
        <mass value="1" />
        <inertia  ixx="0.0009" ixy="0.0"  ixz="0.0"  iyy="0.0009"  iyz="0.0"  izz="0.001" />
      </inertial>
      <visual>
        <origin rpy="1.570796 0  0" xyz="0  0.1  0"/>
        <geometry>
            <cylinder radius="0.1" length="0.2" />
        </geometry>
      </visual>
      <collision>
        <origin rpy="1.570796 0  0" xyz="0  0.1  0"/>
        <geometry>
          <cylinder radius="0.1" length="0.2" />
        </geometry>
      </collision>
    </link>

    <link name="left_wheel_2">
      <inertial>
        <origin xyz="0 0.15 0" />
        <mass value="1" />
        <inertia  ixx="0.0009" ixy="0.0"  ixz="0.0"  iyy="0.0009"  iyz="0.0"  izz="0.001" />
      </inertial>
      <visual>
        <origin rpy="1.570796 0  0" xyz="0  0.1  0"/>
        <geometry>
            <cylinder radius="0.1" length="0.2" />
        </geometry>
      </visual>
      <collision>
        <origin rpy="1.570796 0  0" xyz="0  0.1  0"/>
        <geometry>
          <cylinder radius="0.1" length="0.2" />
        </geometry>
      </collision>
    </link>

    <link name="left_wheel_3">
      <inertial>
        <origin xyz="0 0.15 0" />
        <mass value="1" />
        <inertia  ixx="0.0009" ixy="0.0"  ixz="0.0"  iyy="0.0009"  iyz="0.0"  izz="0.001" />
      </inertial>
      <visual>
        <origin rpy="1.570796 0  0" xyz="0  0.1  0"/>
        <geometry>
            <cylinder radius="0.1" length="0.2" />
        </geometry>
      </visual>
      <collision>
        <origin rpy="1.570796 0  0" xyz="0  0.1  0"/>
        <geometry>
          <cylinder radius="0.1" length="0.2" />
        </geometry>
      </collision>
    </link>


    <link name="right_wheel_1">
      <inertial>
        <origin xyz="0 -0.15 0" />
        <mass value="1" />
        <inertia  ixx="0.0009" ixy="0.0"  ixz="0.0"  iyy="0.0009"  iyz="0.0"  izz="0.001" />
      </inertial>
      <visual>
        <origin rpy="1.570796 0  0" xyz="0  -0.1  0"/>
        <geometry>
            <cylinder radius="0.1" length="0.2" />
        </geometry>
      </visual>
      <collision>
        <origin rpy="1.570796 0  0" xyz="0  -0.1  0"/>
        <geometry>
          <cylinder radius="0.1" length="0.2" />
        </geometry>
      </collision>
    </link>


    <link name="right_wheel_2">
      <inertial>
        <origin xyz="0 -0.15 0" />
        <mass value="1" />
        <inertia  ixx="0.0009" ixy="0.0"  ixz="0.0"  iyy="0.0009"  iyz="0.0"  izz="0.001" />
      </inertial>
      <visual>
        <origin rpy="1.570796 0  0" xyz="0  -0.1  0"/>
        <geometry>
            <cylinder radius="0.1" length="0.2" />
        </geometry>
      </visual>
      <collision>
        <origin rpy="1.570796 0  0" xyz="0  -0.1  0"/>
        <geometry>
          <cylinder radius="0.1" length="0.2" />
        </geometry>
      </collision>
    </link>

    <link name="right_wheel_3">
      <inertial>
        <origin xyz="0 -0.15 0" />
        <mass value="1" />
        <inertia  ixx="0.0009" ixy="0.0"  ixz="0.0"  iyy="0.0009"  iyz="0.0"  izz="0.001" />
      </inertial>
      <visual>
        <origin rpy="1.570796 0  0" xyz="0  -0.1  0"/>
        <geometry>
            <cylinder radius="0.1" length="0.2" />
        </geometry>
      </visual>
      <collision>
        <origin rpy="1.570796 0  0" xyz="0  -0.1  0"/>
        <geometry>
          <cylinder radius="0.1" length="0.2" />
        </geometry>
      </collision>
    </link>


  <link name="imu_link">
    <inertial>
      <origin xyz="0 0 0" />
      <mass value="1" />
      <inertia  ixx="0.001" ixy="0.0"  ixz="0.0"  iyy="0.001"  iyz="0.0"  izz=".001" />
    </inertial>
    <visual>
      <origin xyz="0  0  0"/>
      <geometry>
          <box size=".04 .02 .01"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0  0  0"/>
      <geometry>
        <box size=".04 .02 .01"/>
      </geometry>
    </collision>
  </link>

  <link name="camera_link">
    <inertial>
      <origin xyz="0 0 0" />
      <mass value="1" />
      <inertia  ixx="0.001" ixy="0.0"  ixz="0.0"  iyy="0.001"  iyz="0.0"  izz=".001" />
    </inertial>
    <visual>
      <origin xyz="0  0  0"/>
      <geometry>
          <box size=".04 .02 .01"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0  0  0"/>
      <geometry>
        <box size=".04 .02 .01"/>
      </geometry>
    </collision>
  </link>

  <link name="lidar_link">
    <inertial>
      <origin xyz="0 0 0" />
      <mass value="1" />
      <inertia  ixx="0.001" ixy="0.0"  ixz="0.0"  iyy="0.001"  iyz="0.0"  izz=".001" />
    </inertial>
    <visual>
      <origin xyz="0  0  0"/>
      <geometry>
          <box size=".04 .02 .01"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0  0  0"/>
      <geometry>
        <box size=".04 .02 .01"/>
      </geometry>
    </collision>
  </link>


  <joint name="imu_joint" type="fixed">
    <parent link="chassis"/>
    <child link="imu_link"/>
    <origin rpy="0  0  0" xyz="0       0       0.605"/>
    <axis xyz="0 0  0"/>
    <limit effort="0.0" lower="0" upper="0" velocity="0.0"/>
  </joint>


    <joint name="camera_joint" type="fixed">
      <parent link="chassis"/>
      <child link="camera_link"/>
      <origin rpy="0  0.0873  3.14159265" xyz="-0.35  0       0.605"/>
      <axis xyz="0 0  0"/>2
      <limit effort="0.0" lower="0" upper="0" velocity="0.0"/>
    </joint>

    <joint name="lidar_joint" type="fixed">
      <parent link="chassis"/>
      <child link="lidar_link"/>
      <origin rpy="0  0.1222  3.14159265"  xyz="-0.35       0       0.625"/>
      <axis xyz="0 0  0"/>
      <limit effort="0.0" lower="0" upper="0" velocity="0.0"/>
    </joint>

    <joint name="left_steer_hinge" type="revolute">
      <parent link="chassis"/>
      <child link="left_steer"/>
      <origin rpy="0  0  0" xyz="0.3060660171 0.284 0.32893398282"/>
      <axis xyz="0 -1  0"/>
      <limit effort="0.0" lower="-0.5" upper="1.0" velocity="0.0"/>
    </joint>

    <joint name="right_steer_hinge" type="revolute">
      <parent link="chassis"/>
      <child link="right_steer"/>
      <origin rpy="0  0  0" xyz="0.3060660171 -0.284 0.32893398282"/>
      <axis xyz="0 1  0"/>
      <limit effort="0.0" lower="-1" upper="0.5" velocity="0.0"/>
    </joint>

    <joint name="left_wheel_1_hinge" type="continuous">
      <parent link="chassis"/>
      <child link="left_wheel_1"/>
      <origin rpy="0  0  0" xyz=" -0.42677669529 0.304   0.22322330470"/>
      <axis xyz="0 -1  0"/>
      <limit effort="0" velocity="0"/>
    </joint>

    <joint name="right_wheel_1_hinge" type="continuous">
      <parent link="chassis"/>
      <child link="right_wheel_1"/>
      <origin rpy="0  0  0" xyz=" -0.42677669529 -0.304   0.22322330470"/>
      <axis xyz="0 1  0"/>
      <limit effort="0" velocity="0"/>
    </joint>

    <joint name="left_wheel_2_hinge" type="continuous">
      <parent link="left_steer"/>
      <child link="left_wheel_2"/>
      <origin rpy="0  0  0" xyz=" -0.23  0.04   -0.10571067812"/>
      <axis xyz="0 -1  0"/>
      <limit effort="0" velocity="0"/>
    </joint>
    <joint name="left_wheel_3_hinge" type="continuous">
      <parent link="left_steer"/>
      <child link="left_wheel_3"/>
      <origin rpy="0  0  0" xyz=" 0.23  0.04   -0.10571067812"/>
      <axis xyz="0 -1  0"/>
      <limit effort="0" velocity="0"/>
    </joint>

    <joint name="right_wheel_2_hinge" type="continuous">
      <parent link="right_steer"/>
      <child link="right_wheel_2"/>
      <origin rpy="0  0  0" xyz=" -0.23  -0.04   -0.10571067812"/>
      <axis xyz="0 1  0"/>
      <limit effort="0" velocity="0"/>
    </joint>

    <joint name="right_wheel_3_hinge" type="continuous">
      <parent link="right_steer"/>
      <child link="right_wheel_3"/>
      <origin rpy="0  0  0" xyz=" 0.23  -0.04   -0.10571067812"/>
      <axis xyz="0 1  0"/>
      <limit effort="0" velocity="0"/>
    </joint>




  <gazebo reference="chassis">
    <material>Gazebo/Blue</material>
  </gazebo>

  <gazebo reference ="left_wheel_1">
      <mu1 value="0.8"/>
      <mu2 value="0.8"/>
      <kp value="10000000.0"/>
      <kd value= "1.0"/>
      <minDepth>0.001</minDepth>
      <maxVel>0.0</maxVel>
      <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference ="right_wheel_1">
      <mu1 value="0.8"/>
      <mu2 value="0.8"/>
      <kp value="10000000.0"/>
      <kd value= "1.0"/>
      <minDepth>0.001</minDepth>
      <maxVel>0.0</maxVel>
      <material>Gazebo/Black</material>
  </gazebo>
  <gazebo reference ="left_wheel_2">
      <mu1 value="0.8"/>
      <mu2 value="0.8"/>
      <kp value="10000000.0"/>
      <kd value= "1.0"/>
      <minDepth>0.001</minDepth>
      <maxVel>0.0</maxVel>
      <material>Gazebo/Black</material>
  </gazebo>
  <gazebo reference ="right_wheel_2">
      <mu1 value="0.8"/>
      <mu2 value="0.8"/>
      <kp value="10000000.0"/>
      <kd value= "1.0"/>
      <minDepth>0.001</minDepth>
      <maxVel>0.0</maxVel>
      <material>Gazebo/Black</material>
  </gazebo>


  <gazebo reference ="right_wheel_3">
      <mu1 value="0.8"/>
      <mu2 value="0.8"/>
      <kp value="10000000.0"/>
      <kd value= "1.0"/>
      <minDepth>0.001</minDepth>
      <maxVel>0.0</maxVel>
      <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference ="left_wheel_3">
      <mu1 value="0.8"/>
      <mu2 value="0.8"/>
      <kp value="10000000.0"/>
      <kd value= "1.0"/>
      <minDepth>0.001</minDepth>
      <maxVel>0.0</maxVel>
      <material>Gazebo/Black</material>
  </gazebo>



  <gazebo reference="imu_link">
      <gravity>true</gravity>
      <sensor name="imu_sensor" type="imu">
        <always_on>true</always_on>
        <update_rate>100</update_rate>
        <visualize>true</visualize>
        <topic>__default_topic__</topic>
        <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
          <topicName>rover/imu</topicName>
          <bodyName>imu_link</bodyName>
          <updateRateHZ>10.0</updateRateHZ>
          <gaussianNoise>0.0</gaussianNoise>
          <xyzOffset>0 0 0</xyzOffset>
          <rpyOffset>0 0 0</rpyOffset>
          <frameName>imu_link</frameName>
        </plugin>
        <pose>0 0 0 0 0 0</pose>
      </sensor>
    </gazebo>


    <gazebo>
      <plugin name="skid_steer_drive_controller" filename="libgazebo_ros_skid_steer_drive.so">
        <updateRate>50.0</updateRate>
        <robotNamespace>/rover</robotNamespace>
        <leftRearJoint>left_wheel_2_hinge</leftRearJoint>
        <rightRearJoint>right_wheel_2_hinge</rightRearJoint>
        <leftFrontJoint>left_wheel_1_hinge</leftFrontJoint>
        <rightFrontJoint>right_wheel_1_hinge</rightFrontJoint>
        <wheelSeparation>0.692</wheelSeparation>
        <wheelDiameter>0.2034</wheelDiameter>
        <robotBaseFrame>chassis</robotBaseFrame>
        <torque>20</torque>
        <topicName>cmd_vel</topicName>
        <broadcastTF>true</broadcastTF>
      </plugin>
    </gazebo>



</robot>
